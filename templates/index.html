{% extends "base.html" %}

{% block title %}Dashboard - IntelliHome{% endblock %}

{% block content %}
<h1 class="page-title">ğŸ  System Dashboard</h1>

<div class="dashboard-grid">
    <div class="card">
        <h2>ğŸŒ¡ï¸ Temperature</h2>
        <div class="sensor-value">{{ live_temp if live_temp != 'N/A' else '--' }}{{ 'Â°C' if live_temp != 'N/A' else '' }}</div>
        <div class="sensor-label">Current Reading</div>
    </div>

    <div class="card">
        <h2>ğŸ’§ Humidity</h2>
        <div class="sensor-value">{{ live_humid if live_humid != 'N/A' else '--' }}{{ '%' if live_humid != 'N/A' else '' }}</div>
        <div class="sensor-label">Current Reading</div>
    </div>

    <div class="card">
        <h2>ğŸŒ€ Pressure</h2>
        <div class="sensor-value">{{ live_pressure if live_pressure != 'N/A' else '--' }}{{ ' hPa' if live_pressure != 'N/A' else '' }}</div>
        <div class="sensor-label">Current Reading</div>
    </div>
</div>

<div class="dashboard-grid">
    <div class="card">
        <h2>ğŸ”’ Security Status</h2>
        <div class="sensor-value">{{ system_mode if system_mode != 'N/A' else 'Unknown' }}</div>
        <div class="sensor-label">System Mode</div>
    </div>

    <div class="card">
        <h2>ğŸ“Š Database Status</h2>
        <div class="sensor-label">Environmental Records</div>
        <div class="sensor-value" style="font-size: 2rem;">{{ latest_env. id if latest_env else 0 }}</div>
        {% if latest_env %}
        <p style="color: #666; margin-top: 10px;">Last update: {{ latest_env.timestamp. strftime('%Y-%m-%d %H:%M') }}</p>
        {% else %}
        <p style="color: #f56565; margin-top: 10px;">No data available</p>
        {% endif %}
    </div>

    <div class="card">
        <h2>ğŸš¨ Security Events</h2>
        <div class="sensor-label">Total Events</div>
        <div class="sensor-value" style="font-size: 2rem;">{{ latest_security.id if latest_security else 0 }}</div>
        {% if latest_security %}
        <p style="color: #666; margin-top: 10px;">Last event: {{ latest_security.timestamp. strftime('%Y-%m-%d %H:%M') }}</p>
        {% else %}
        <p style="color: #f56565; margin-top: 10px;">No data available - <a href="/create_db">Create Table</a></p>
        {% endif %}
    </div>
</div>

<div class="card">
    <h2>ğŸ¯ Quick Actions</h2>
    <div style="display: flex; gap: 15px; flex-wrap: wrap; margin-top: 20px;">
        <a href="/environmental" class="btn btn-primary">View Environmental Data</a>
        <a href="/security" class="btn btn-primary">Manage Security</a>
        <a href="/control" class="btn btn-primary">Control Devices</a>
    </div>
</div>
{% endblock %}